<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8"><title>Search California Smarter Balanced Test Results | EdSource</title></meta>
        <link rel="stylesheet" type="text/css" href="http://edsource.org/wp-content/css/charts/table.css">
        {% include 'header.html' %}
    </head>
    <body>
        <div id="slick-contain">
            {% include 'nav.html' %}
            <section id="slick-body">
                <div class="pretty-table">
                    <section id="pretty-table-search-options">
                        <input id="pretty-table-search" type="text" style="height:24px;" placeholder="Search School Districts">
                        <div><p class="pretty-table-button" id="execute-search">Search</p></div>
                        <div><p class="pretty-table-button" id="reset-search">Reset</p></div>
                    </section>
                    <section>
                         <table id="lcff-table" cellpadding=7>
                            <thead>
                                <th>District/Charter</th>
                                <th>High-Needs Students</th>
                                <th>2014-15 Funding</th>
                                <th>2015-16 Estimate</th>
                                <th>2020-21 Target</th>
                            </thead>
                            {% for d in data %}
                            <tr>
                                <td><a href="{{d.slug}}.html">{{d.target}}</a></td>
                                <td>{{'{:.0f}'.format(d.high_needs|float*100)}}%</td>
                                <td>${{('{0:,}'.format(d.y201415 | int))}}</td>
                                <td>${{('{0:,}'.format(d.y201516 | int))}}</td>
                                <td>${{('{0:,}'.format(d.y202021 | int))}}</td>                                             
                            </tr>
                            {% endfor %}
                        </table>
                    </section>
                </div>  
            </section>  
            {% include 'footer.html' %}    
        </div>
    </body>    
    <script type="text/javascript">
        function searchTool(c){
            var jQueryrows = jQuery(c + ' tr');
            var allRows = jQuery(c + ' tr:not('+ c +' thead tr)');

            /* SEARCH STRING
            ======================================*/    
            var val = jQuery.trim(jQuery('#pretty-table-search').val()).replace(/ +/g, ' ').toLowerCase();
            if (val === ''){
                jQuery(allRows).css('display','table-row');
            }
            else if (val !== '') {
                 for (var i=0 ; i < allRows.length ; i++){
                    allRows[i].style.display = "table-row";

                    var testText = allRows[i].textContent;
                    testText = testText.replace(/\s+/g, ' ').toLowerCase();
                    if (testText.indexOf(val) == -1){
                        allRows[i].style.display = "none";
                    }
                 }
            }   
        }

        jQuery(document).ready(function(){

            /* CONFIGURE TABLESORTER
            ======================================*/ 
            jQuery('#lcff-table').tablesorter({sortList:[1,1]});

            /* SEARCH OPTIONS
            ======================================*/ 
            jQuery('#execute-search').on('click', function(){searchTool('#lcff-table');});
            jQuery('#pretty-table-search').on('keypress', function(e){var key = e.which;if (key == 13){searchTool('#lcff-table');}})

            jQuery('#reset-search').on('click', function(){
                jQuery('tr').css('display','table-row');
                jQuery('#pretty-table-search').val('');
            })
        })
    </script>
</html>